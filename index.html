
<!DOCTYPE html>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">

	<head>
		<title>Eric Winnington</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />		
        <link href="/assets/css/highlight.css" rel="stylesheet">
		<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="/assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
        <link href="/assets/css/override.css" rel="stylesheet" />

		<meta name="description" content="A collection of thoughts, code and snippets." />
		<link type="application/rss+xml" rel="alternate" title="Eric Winnington" href="/feed.rss" />
				<link type="application/atom+xml" rel="alternate" title="Eric Winnington" href="/feed.atom" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" href="/favicon.ico" type="image/x-icon">

		<meta name="application-name" content="Eric Winnington" />
		<meta name="msapplication-tooltip" content="Eric Winnington" />
		<meta name="msapplication-starturl" content="/" />

		<meta property="og:title" content="Eric Winnington" /> 
		<meta property="og:type" content="website" />
		<meta property="og:url" content="http://ewinnington.github.io/" />
		<!-- TODO: More social graph meta tags -->

        <script src="/assets/js/highlight.pack.js"></script>   
		
        <meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@ewinnington" />
<meta name="twitter:title" content="Eric Winnington" />
<meta name="twitter:description" content="A collection of thoughts, code and snippets." />

<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
		
	</head>

	<body>
		<!-- Wrapper -->
		<div id="wrapper">

			<!-- Header -->
			<header id="header">
				<div class="inner">

					<!-- Logo -->
					<a href="/" class="logo">
						<span class="title">Eric Winnington</span>
					</a>

					<!-- Nav -->
					<nav>
						<ul>
							<li><a href="#menu">Menu</a></li>
						</ul>
					</nav>

				</div>
			</header>

			<!-- Menu -->
			<nav id="menu">
				<h2>Menu</h2>
				<ul>
					        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About Me</a></li>
        <li><a href="/videos">Videos on programming</a></li>

				</ul>
			</nav>

			<!-- Main -->
			<div id="main">
				<div class="inner">

    <header>
        <h1>A collection of thoughts, code and snippets.</h1>
    </header>

					
					<div id="content">
						
<div class="row">
    <div class="8u 12u$(medium)">
                <div>
                    <a href="/posts/Starship-laser-ablation">
                        <h2>the case for a SpaceX Starship laser ablation for orbital debris management</h2>
                    </a>
                    <p>Posted on Sunday, 18 September 2022</p>
<p>SpaceX’s Starship program as a platform for specialised load-outs has many potential applications: Tanker variants for orbital refuelling, Crew variant for Dear Moon mission and dedicated satellite launcher for the Starlink satellite constellation deployment being the variants we already know about.</p>
<p>With the latest discussion about Orbital debris fields, I suggest it is time to discuss about another variant: a dedicated laser ablation Starship variant.</p>
<p>To deorbit or destroy debris in Earth’s orbit, laser ablation is one of the ideal techniques to use since it can directly burn up small debris or  deorbit larger ones via plasma propulsion (in effect, burning up the target object and causing it to be propelled by the plasma generated by the laser hitting the target).</p>
<p>To be able to make orbital cleanup affordable, we need to have a cheap to fly, high power laser with a sufficient burn time and have the ability to choose the orbit of our laser platform.</p>
<ul>
<li>Cheap to fly: The launch costs of a SpaceX starship is estimated to be at least one order of magnitude less in dollar per kilo to orbit.</li>
<li>High power laser: The high power of chemical lasers along with their high mass requirements make them a good fit for integration into a Starship. With sufficient mass for the chemicals to supply the laser, the lasers could be used long enough to clear the coplanar orbit. Once the chemicals are depleted, the starship can be landed and the laser refuelled for another mission.</li>
<li>Ability to choose orbit: Laser ablation is most effective when the platform if shooting from a “same altitude and coplanar” orbit. Different launches are then the most effective way of reaching these orbits to get maximal efficiency.</li>
</ul>
<p>If the US government decides to start paying for orbital clearing services, it would be a clear case to develop such a Starship variant. Without other incentives, it might still be profitable by selling “deorbiting and clearance services” to other satellite providers. This remains to be seen how much “good citizenship” is to be expected from satellite constructors, launchers and operators.</p>
						<hr>
                </div>       
                <div>
                    <a href="/posts/db-health">
                        <h2>Checking for liveness on databases for health checks</h2>
                    </a>
                    <p>Posted on Tuesday, 14 July 2020</p>
<p>When you just want to check a DB is reachable from your api or code, a health check is used. For the following DBs the simplest query is:</p>
<ul>
<li>Oracle: <code>SELECT 1 FROM dual</code></li>
<li>Postgresql: <code>SELECT 1</code></li>
<li>SQLite: <code>SELECT 1</code></li>
<li>Mysql / MariaDb: <code>SELECT 1</code></li>
<li>Microsoft SQL-Server: <code>SELECT 1</code></li>
</ul>
<p>There is really an odd one on the list.</p>
						<hr>
                </div>       
                <div>
                    <a href="/posts/jupyter-tips-csharp">
                        <h2>Tips and tricks for C# Jupyter notebook</h2>
                    </a>
                    <p>Posted on Sunday, 17 November 2019</p>
<p>As I use the Jupyter notebook with C# integration, I'll add to this list of tricks as I discover them.</p>
<h2 id="adding-collapsed-details-to-jupyter-notebooks">Adding collapsed details to jupyter notebooks</h2>
<p>I wanted to show hints and answers to questions in the jupyter notebook, but I didn't want them to be directly visible without interaction.</p>
<p><img src="/posts/images/jupyter-notebook-tips/collapsed_details.png" class="img-fluid" alt="collapsed" /></p>
<p><img src="/posts/images/jupyter-notebook-tips/expanded_details.png" class="img-fluid" alt="expanded" /></p>
<p>This was done by creating a markdown block with an HTML section inside. When interacted with, the section expands.</p>
<pre><code class="language-HTML">&lt;details&gt;
&lt;summary&gt;Summary of the fold&lt;/summary&gt;
  ... Content shown after the fold ...
&lt;/details&gt;
</code></pre>
<details>
<summary>Summary of the fold</summary>
  ... Content shown after the fold ...
</details>
<p>And since it's just HTML, it works anywere, including here.</p>
<h2 id="display-function">display() function</h2>
<p>The C# kernel embedded in Jupyter has some functions that control the output to the cells of the notebook when executed. One of these functions is  <code>display()</code>.</p>
<h3 id="tables">Tables</h3>
<p>It shows properties of objects or lists in a table format. In my linear programming solver examples, I used this command to make a table with the name and value of each problem variable.</p>
<pre><code class="language-CSharp"> display(solver.variables().Select(a =&gt; new { Name  = a.Name(), Value = a.SolutionValue() })); 
</code></pre>
<p><img src="/posts/images/lp/10-6.png" class="img-fluid" alt="var_table" /></p>
<p>This is an ideal case for <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types">C#'s anonymous objects</a> and <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/data-transformations-with-linq">linq to select the object properties</a> that you want to see in the table. Adding <code>using System.Linq;</code> to your references will allow you to use the <code>.Select( x =&gt; new { PropertyHeader = x.PropertyValue, ... })</code> linq command.</p>
<h3 id="svgs">SVGs</h3>
<p>I discovered the <code>display(HTML())</code> function allows you to pass items such as SVGs from inside C# to be rendered below the block. Two examples are the SVG image triange and the bar chart. On top of that, the bar chart is stylable by CSS.</p>
<p><img src="/posts/images/jupyter-notebook-tips/svg_img.png" class="img-fluid" alt="expanded" /></p>
<p>The SVG code is generated inside C#, then the variable containing the SVG is displayed.</p>
<p><img src="/posts/images/jupyter-notebook-tips/bar_chart.png" class="img-fluid" alt="expanded" /></p>
<p>Finally, you can add create a cell containing some CSS (with <code>%%html</code>) , which when executed will change the chart as shown.
<img src="/posts/images/jupyter-notebook-tips/bar_chart_with_css.png" class="img-fluid" alt="expanded" />
<img src="/posts/images/jupyter-notebook-tips/bar_chart_css.png" class="img-fluid" alt="expanded" /></p>
<h2 id="magic">Magic</h2>
<p>The <code>%lsmagic</code> command shows a list of commands available to use in code blocks.</p>
<p><img src="/posts/images/jupyter-notebook-tips/lsmagic.png" class="img-fluid" alt="expanded" /></p>
<h3 id="javascript">%%javascript</h3>
<p>You can execute javascript with the <code>%%javascript</code> magic.</p>
<p><img src="/posts/images/jupyter-notebook-tips/javascript_hello.png" class="img-fluid" alt="collapsed" /></p>
<p><img src="/posts/images/jupyter-notebook-tips/javascript_hello_active.png" class="img-fluid" alt="collapsed" /></p>
<h3 id="html">%%html</h3>
<p>As previously mentioned, the %%html command will allow you to add CSS blocks and any other HTML output directly into the Jupyter output cell.</p>
<h3 id="time">%%time</h3>
<p>Gives you access to the wall time. Actual time took to execution of the cell.</p>
<h3 id="whos">%whos</h3>
<p>Gives you access to the list of currently defined variable in the memory of the notebook. Also lists the type and value (as a &quot;toString() representation) of the objects.</p>
<h3 id="fsharp">%%fsharp</h3>
<p>You can intermingle C# and F# code inside one notebook, as long as they are in different cells. You can switch to F# by prefixing the cell with <code>%%fsharp</code></p>
<pre><code class="language-%%fsharp">let main argv =
    display &quot;Hello World from F#!&quot;
    0 
main()
</code></pre>
<p><img src="/posts/images/jupyter-notebook-tips/f_sharp.png" class="img-fluid" alt="collapsed" /></p>
<h2 id="graphing-from-c">Graphing from C#</h2>
<p>We can chart using <code>Xplot.Plotly</code>.</p>
<pre><code class="language-CSharp">//Install XPlot package
#r &quot;nuget:XPlot.Plotly,2.0.0&quot;
using XPlot.Plotly;
</code></pre>
<p>Input data:</p>
<pre><code class="language-CSharp">DateTime now = DateTime.Now; 
var imax = 8760; 
var rand = new Random(); 
double[] data = Enumerable.Range(1, imax).Select(x =&gt; 20.0 + 15.0 * Math.Sin(x/60.0) + 12 * rand.NextDouble()).ToArray(); 
DateTime[] tp = Enumerable.Range(1, imax).Select(x =&gt; now.AddHours(x) ).ToArray(); 

int totalNumberForBarChart = 3;
double[] actualFares = new [] {3.4, 12.3, 20.42};
double[] predictionFares = new [] {7.4, 14.3, 18.42};
int[] elements = Enumerable.Range(0, totalNumberForBarChart).ToArray();
</code></pre>
<p>my samples are here <a href="https://github.com/ewinnington/noteb/blob/master/Charts_CSharp.ipynb">C# charts</a></p>
<h3 id="two-bar-plot">Two bar plot</h3>
<p><img src="/posts/images/jupyter-notebook-tips/bar.png" class="img-fluid" alt="bar" /></p>
<pre><code class="language-CSharp">// Define group for Actual values
var ActualValuesGroupBarGraph = new Graph.Bar()
{
   x = elements,
   y = actualFares,
   name = &quot;Actual&quot;
};
 
// Define group for Prediction values
var PredictionValuesGroupBarGraph = new Graph.Bar()
{
   x = elements,
   y = predictionFares,
   name = &quot;Predicted&quot;
};
 
var chart = Chart.Plot(new[] {ActualValuesGroupBarGraph, PredictionValuesGroupBarGraph});
var layout = new Layout.Layout(){barmode = &quot;group&quot;, title=&quot;Actual fares vs. Predicted fares Comparison&quot;};
chart.WithLayout(layout);
chart.WithXTitle(&quot;Cases&quot;);
chart.WithYTitle(&quot;Fare&quot;);
chart.WithLegend(true);
chart.Width = 700;
chart.Height = 400;
 
display(chart);
</code></pre>
<h3 id="histogram">Histogram</h3>
<p><img src="/posts/images/jupyter-notebook-tips/histogram.png" class="img-fluid" alt="hist" /></p>
<pre><code class="language-CSharp">var faresHistogram = Chart.Plot(new Graph.Histogram(){x = data, autobinx = false, nbinsx = 20});
var layout = new Layout.Layout(){title=&quot;Distribution of taxi trips per cost&quot;};
faresHistogram.WithLayout(layout);

display(faresHistogram);
</code></pre>
<h3 id="scatter">Scatter</h3>
<p><img src="/posts/images/jupyter-notebook-tips/scatter.png" class="img-fluid" alt="scatter" /></p>
<pre><code class="language-CSharp">var chart = Chart.Plot(
    new Graph.Scatter()
    {
        x = actualFares,
        y = predictionFares,
        mode = &quot;markers&quot;,
        marker = new Graph.Marker()
        {
            color = predictionFares,
            colorscale = &quot;Jet&quot;
        }
    }
);

var layout = new Layout.Layout(){title=&quot;Plot Time vs. Distance &amp; color scale on Fares&quot;};
chart.WithLayout(layout);
chart.Width = 500;
chart.Height = 500;
chart.WithLegend(true);

display(chart);
</code></pre>
<h3 id="line-chart-with-scatter">Line chart with scatter</h3>
<p><img src="/posts/images/jupyter-notebook-tips/lines.png" class="img-fluid" alt="lines" /></p>
<pre><code class="language-CSharp">var linedUp = new Graph.Scatter()
{
    x = tp,
    y = data,
    mode = &quot;lines&quot;,
};

var chart = Chart.Plot(linedUp);
chart.WithXTitle(&quot;Date&quot;);
chart.WithYTitle(&quot;Value&quot;);
chart.WithLegend(true);
chart.Width = 1200;
chart.Height = 600;
display(chart);
</code></pre>
						<hr>
                </div>       
                <div>
                    <a href="/posts/jupyter-lp-20">
                        <h2>Applications in LP and MILP with C# and OR-Tools inside Jupyter</h2>
                    </a>
                    <p>Posted on Saturday, 16 November 2019</p>
<p>Thanks to the integration of C# into <a href="https://jupyter.org/">Jupyter notebooks</a> with the <a href="https://github.com/dotnet/try">kernel from Donet try</a> and support from the <a href="https://mybinder.org/">MyBinder.org</a> hosting, it's easy to share with you runnable workbooks to illustrate how to use the <a href="https://developers.google.com/optimization">Google OR-Tools</a> to solve the <a href="https://en.wikipedia.org/wiki/Linear_programming">linear</a> (LP) and <a href="https://en.wikipedia.org/wiki/Integer_programming">mixed-integer linear problems</a> (MILP) .</p>
<h1 id="applications-of-linear-programming">Applications of linear programming</h1>
<h2 id="lp-problem-wire-production">LP Problem : Wire production</h2>
<p>A plant makes aluminium and copper wires. Each Kg of aluminium wire requires 10 kWh of electricity and <span class="math">\(\frac{1}{2}\)</span> hour of labour. Each Kg of Copper wire requires 4 kWh of electricity and $1$ hour of labour. Electricity is limited to 450 kWh/day, labour is limited to 42.5 hours/day at a cost of 11 € an hour, Electricity cost is 20 € / MWh, Aluminium cost is 1.8 €/Kg, Copper cost is 5.4 €/Kg. Total weight delivered to the plant daily is limited to 56 Kg. Aluminium wire sales price is 45 €/Kg, Copper wire sales price is 50 €/Kg.</p>
<p>What should be produced to maximise profit and what is the maximum profit?</p>
<p><a href="https://mybinder.org/v2/gh/ewinnington/noteb/master?filepath=Lp_WireProduction.ipynb">Launch the binder</a>  <a href="https://mybinder.org/v2/gh/ewinnington/noteb/master?filepath=Lp_WireProduction.ipynb"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid" alt="Binder" /></a></p>
<pre><code class="language-CSharp">Solver solver = Solver.CreateSolver(&quot;LinearProgramming&quot;, &quot;CLP_LINEAR_PROGRAMMING&quot;);

//Setting up the variables and constants of the problem 
Variable Al = solver.MakeNumVar(0.0, double.PositiveInfinity, &quot;Al&quot;);
Variable Cu = solver.MakeNumVar(0.0, double.PositiveInfinity, &quot;Cu&quot;);
double El_Price = 20.0; double El_Max = 450; 
double La_Price = 11.0; double La_Max = 42.5; 
double Weight_Max = 56.0; 
double Al_Purchase = 1.8 ; double Al_Sale = 45.0;
double Cu_Purchase = 5.4; double Cu_Sale = 50.0;

// Maximize revenue 
Objective objective = solver.Objective();
objective.SetCoefficient(Al, Al_Sale-Al_Purchase-(La_Price * 1/2.0)-(El_Price * 10/1000.0));
objective.SetCoefficient(Cu, Cu_Sale-Cu_Purchase-(La_Price * 1)-(El_Price * 4/1000.0));
objective.SetMaximization();

// Electricity usage limit
Constraint c0 = solver.MakeConstraint(0, El_Max);
c0.SetCoefficient(Al, 10);
c0.SetCoefficient(Cu, 4);

// Labour usage limit
Constraint c1 = solver.MakeConstraint(0, La_Max);
c1.SetCoefficient(Al, 1/2.0);
c1.SetCoefficient(Cu, 1);

// Weight limit
Constraint c2 = solver.MakeConstraint(0, Weight_Max);
c2.SetCoefficient(Al, 1);
c2.SetCoefficient(Cu, 1);

SolveAndPrint(solver);
</code></pre>
<h2 id="milp-problem-knapsack">MILP Problem : Knapsack</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Knapsack_problem">knapsack problem</a> defines a bag that was a maximal weight of <span class="math">\(W\)</span>, we can take items from a set of items each with a weight of <span class="math">\(w_i\)</span> and a value of <span class="math">\(v_i\)</span>. Typically, the problem is defined with an <span class="math">\(x_i \in \{0,1\}\)</span> variable set to either 0 or 1 knapsack where each item is either taken or not.</p>
<p>Here we are going to allow fractional parts of the items to be taken so that we can solve it as a linear problem (also known as a linear relaxation), allowing <span class="math">\(x_i \in [0,1]\)</span>.</p>
<p><a href="https://mybinder.org/v2/gh/ewinnington/noteb/master?filepath=Knapsack_Lp_Milp.ipynb">Launch the binder</a>  <a href="https://mybinder.org/v2/gh/ewinnington/noteb/master?filepath=Knapsack_Lp_Milp.ipynb"><img src="https://mybinder.org/badge_logo.svg" class="img-fluid" alt="Binder" /></a></p>
<pre><code class="language-CSharp">//Array of items, weights and totals
int nItems = 10; 
double maxWeight = 220; 
double[] weights = {31, 27, 12, 39,  2, 69, 66, 29, 45, 58};
double[] values =  {24, 27, 26, 15, 19, 33, 30, 28, 65, 42};

Solver milp_solver = Solver.CreateSolver(&quot;MILP&quot;, &quot;CBC_MIXED_INTEGER_PROGRAMMING&quot;);

Variable[] Items = milp_solver.MakeBoolVarArray(10, &quot;Items&quot;);

// Maximize revenue 
Objective objective = milp_solver.Objective();
for(int i = 0; i &lt; nItems; i++) objective.SetCoefficient(Items[i], values[i]);
objective.SetMaximization();

// Weight limit
Constraint c0 = milp_solver.MakeConstraint(0, maxWeight);
for(int i = 0; i &lt; nItems; i++) c0.SetCoefficient(Items[i], weights[i]);

SolveAndPrint(milp_solver, nItems, weights);
</code></pre>
<p>There are many ways of solving the knapsack problem, using LP and MILP solvers as seen here or using Dynamic Programming. The Google OR-Tools have a specific solver for multi-dimensional knapsack problems, including one which uses Dynamic Programming.</p>
						<hr>
                </div>       
        <ul class="pager">
            <li class="previous">                
            </li>
            <li class="next">
            </li>
        </ul>
    </div>
    <div class="4u 12u$(medium)">

            <h5>Tags</h5>
            <ul class="actions small">
                    <li><a role="button" href="/tags/Migrated" class="button small">Migrated (38)</a></li>
                    <li><a role="button" href="/tags/CSharp" class="button small">CSharp (8)</a></li>
                    <li><a role="button" href="/tags/Jupyter-notebook" class="button small">Jupyter notebook (7)</a></li>
                    <li><a role="button" href="/tags/Dotnet-try" class="button small">Dotnet try (7)</a></li>
                    <li><a role="button" href="/tags/Oracle" class="button small">Oracle (6)</a></li>
                    <li><a role="button" href="/tags/CommandLine" class="button small">CommandLine (4)</a></li>
                    <li><a role="button" href="/tags/WPF" class="button small">WPF (4)</a></li>
                    <li><a role="button" href="/tags/Rpi" class="button small">Rpi (4)</a></li>
                    <li><a role="button" href="/tags/R" class="button small">R (3)</a></li>
                    <li><a role="button" href="/tags/Postgresql" class="button small">Postgresql (3)</a></li>
            </ul>
            <ul class="actions small">
                <li><a href="/tags" class="button small">View All Tags &rarr;</a></li>
            </ul>    

            <h5>Older Posts</h5>
            <ul>
                    <li><a href="/posts/my-binder-jupyter-csharp">Hosting your C# Jupyter notebook online by adding one file to your repo</a></li>
                    <li><a href="/posts/jupyter-lp-10">Introduction to linear programming with C# and OR-Tools inside Jupyter</a></li>
                    <li><a href="/posts/jupyter-docker-csharp-postgres">Docker controlled from Jupyter Notebook C# with PostgresDB</a></li>
                    <li><a href="/posts/jupyter-sqlite-csharp">Testing SQLite in C# Jupyter notebook</a></li>
            </ul>
                <ul class="actions small">
                    <li><a href="/posts" class="button small">Archive &rarr;</a></li>
                </ul>

        
    </div> 
</div>
					</div>
				</div>
			</div>

			<!-- Footer -->
			<footer id="footer">
				<div class="inner">
    <section>
        <h2>Feeds</h2>
        <ul class="actions small vertical">
            <li><a href="/feed.rss" class="button small"><i class="fa fa-rss"></i> RSS Feed</a></li>
                        <li><a href="/feed.atom" class="button small"><i class="fa fa-rss"></i> Atom Feed</a></li>
        </ul>
    </section>
    <section>
    </section>
    <ul class="copyright">
        <li>Copyright © 2022</li>
        <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        <li><a href="https://wyam.io">Generated by Wyam</a></li>
    </ul>
</div>

			</footer>

		</div>
		
		

		<!-- Scripts -->
		<script>hljs.initHighlightingOnLoad();</script>
		<script src="/assets/js/jquery.min.js"></script>
		<script src="/assets/js/skel.min.js"></script>
		<script src="/assets/js/util.js"></script>
		<!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
		<script src="/assets/js/main.js"></script>

	</body>

</html>
